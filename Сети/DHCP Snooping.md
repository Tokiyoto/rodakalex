**DHCP Snooping** — это функция безопасности, реализуемая на уровне коммутаторов, которая предотвращает атаки на DHCP-серверы и клиентов в сети. Этот механизм помогает защитить сеть от различных атак, связанных с использованием DHCP, включая поддельные DHCP-серверы и попытки выдать себя за легитимных клиентов.

### Основные аспекты DHCP Snooping:

1. **Назначение**:
   - **Защита от поддельных DHCP-серверов**: DHCP Snooping предотвращает злоумышленников от запуска поддельных DHCP-серверов, которые могут предоставлять недействительные IP-адреса или конфигурации, тем самым перехватывая или перенаправляя трафик пользователей.
   - **Защита от атак на клиентов**: Также предотвращает атаки типа "DHCP starvation", где злоумышленник пытается занять все IP-адреса, доступные на сервере, делая невозможным получение IP-адреса другими легитимными клиентами.

2. **Как работает DHCP Snooping**:
   - **Разделение портов на доверенные и недоверенные**:
     - **Доверенные порты** (trusted ports): Обычно используются для подключения к DHCP-серверам или к другим коммутаторам. DHCP-сообщения, приходящие через эти порты, считаются легитимными.
     - **Недоверенные порты** (untrusted ports): Обычно используются для подключения клиентских устройств. DHCP-сообщения, поступающие через эти порты, проходят строгую проверку.
   - **Фильтрация трафика**:
     - Коммутатор, поддерживающий DHCP Snooping, фильтрует DHCP-сообщения на недоверенных портах, блокируя несанкционированные ответы на DHCP-запросы, исходящие от поддельных серверов.
   - **Построение таблицы DHCP Snooping Binding**:
     - Коммутатор ведет таблицу (DHCP Snooping Binding Table), которая связывает MAC-адреса с IP-адресами, VLAN и доверенными портами. Эта таблица помогает коммутатору отслеживать, какие IP-адреса назначены каким устройствам, и предотвращает атаки на основе подмены IP-адресов (IP spoofing).

3. **Противодействие атакам**:
   - **DHCP starvation**: Если злоумышленник пытается забить DHCP-сервер поддельными запросами, чтобы исчерпать пул IP-адресов, DHCP Snooping на недоверенных портах может ограничить количество запросов, приходящих от одного устройства.
   - **DHCP spoofing**: Злоумышленник, запускающий поддельный DHCP-сервер, будет заблокирован, если его сообщения поступают через недоверенные порты.

4. **Настройка и использование**:
   - DHCP Snooping обычно настраивается на управляемых коммутаторах, где администраторы могут определить, какие порты считать доверенными, а какие — недоверенными. Это обеспечивает гибкость и адаптивность в применении защиты к различным сегментам сети.

5. **Сочетание с другими механизмами безопасности**:
   - DHCP Snooping часто используется в комбинации с другими методами безопасности, такими как **IP Source Guard** (IPSG) и **Dynamic ARP Inspection** (DAI). IP Source Guard предотвращает подмену IP-адресов, а Dynamic ARP Inspection защищает от атак на протокол ARP, используя информацию из таблицы DHCP Snooping.

### Заключение:
DHCP Snooping является важным механизмом защиты сети от атак, связанных с DHCP, особенно в больших корпоративных сетях или сетях с общим доступом. Он обеспечивает безопасность, сохраняя целостность и надежность процесса назначения IP-адресов и других сетевых параметров.